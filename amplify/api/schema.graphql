# Filename: amplify/api/schema.graphql
# Simplified version for deployment testing (removes custom mutation & input)

# Enum used by LedgerEntry
enum LedgerEntryType {
  INVOICE
  CREDIT_NOTE
  INCREASE_ADJUSTMENT
  DECREASE_ADJUSTMENT
}

# LedgerEntry model definition using SDL directives
# @model generates DynamoDB table, CRUDL GraphQL operations
# @auth restricts access based on owner field
type LedgerEntry @model @auth(rules: [{ allow: owner }]) {
  id: ID!
  type: LedgerEntryType! # Type is required
  amount: Float!
  description: String
  createdAt: AWSDateTime! # Added automatically by @model
  updatedAt: AWSDateTime! # Added automatically by @model
  owner: String          # Added automatically by @auth owner rule
}

# AccountStatus model definition using SDL directives
type AccountStatus @model @auth(rules: [{ allow: owner }]) {
  id: ID!
  totalUnapprovedInvoiceValue: Float! # Required field
  currentAccountBalance: Float!       # Required field
  createdAt: AWSDateTime!             # Added automatically by @model
  updatedAt: AWSDateTime!             # Added automatically by @model
  owner: String                       # Added automatically by @auth owner rule
}

# NOTE: The 'PaymentRequestInput' input type and the 'Mutation' type
# containing 'requestPayment' have been temporarily removed for this test deployment.
# Standard Query/Subscription types will be auto-generated by @model.